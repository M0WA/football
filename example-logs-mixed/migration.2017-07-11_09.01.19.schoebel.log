./migrate-resource.sh --force=1 shrink infongt-eu6:icpu16:istore2a
force=1
operation=shrink
res=infongt-eu6:icpu16:istore2a
Sourcing hooks in './hooks-cm3.sh'
Using clustermw username: 'tschoebeltheuer'
Determined the following CURRENT hypervisor: "icpu16"
Determined the following CURRENT primary: "istore2a"
PING icpu16.schlund.de (10.46.0.131) 56(84) bytes of data.
64 bytes from icpu16.schlund.de (10.46.0.131): icmp_seq=1 ttl=59 time=0.394 ms

--- icpu16.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.394/0.394/0.394/0.000 ms
PING istore2a.schlund.de (10.46.98.4) 56(84) bytes of data.
64 bytes from istore2a.schlund.de (10.46.98.4): icmp_seq=1 ttl=60 time=0.577 ms

--- istore2a.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.577/0.577/0.577/0.000 ms
/mars is a mountpoint
  infongt-eu6 UpToDate Replicating DCASFR Primary istore2a 
     Hint: you are wasting 31668 MiB on disk /dev/vg2a/infongt-eu6
/vol/infongt-eu6 is a mountpoint
Determined the following secondaries: 'icpu5138
icpu5139
istore2b'
PING icpu5138.schlund.de (10.46.12.76) 56(84) bytes of data.
64 bytes from icpu5138.schlund.de (10.46.12.76): icmp_seq=1 ttl=59 time=0.328 ms

--- icpu5138.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.328/0.328/0.328/0.000 ms
PING icpu5139.schlund.de (10.46.28.76) 56(84) bytes of data.
64 bytes from icpu5139.schlund.de (10.46.28.76): icmp_seq=1 ttl=58 time=1.24 ms

--- icpu5139.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 1.240/1.240/1.240/0.000 ms
PING istore2b.schlund.de (10.46.102.2) 56(84) bytes of data.
64 bytes from istore2b.schlund.de (10.46.102.2): icmp_seq=1 ttl=59 time=1.26 ms

--- istore2b.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 1.262/1.262/1.262/0.000 ms
Determined the following VG name: "vg2a"
Determined the following LV path: "/dev/vg2a/infongt-eu6"
Determined USED  space: 993564
Determined TOTAL space: 19990528
Computed TARGET  space: 20000000
No need for shrinking the LV space of infongt-eu6
vg2a REST space on 'istore2a' :   21474562048
vginfong REST space on 'icpu5138' :   7132254208
vginfong REST space on 'icpu5139' :   7132254208
vg2b REST space on 'istore2b' :   21482029056
[CONFIRM: Press Return to continue, ^C to abort] 
Running hook: hook_get_vg hook_get_vg istore2a
Executing on istore2a: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on istore2a: 'if [[ -e /dev/vg2a/infongt-eu6-copy ]]; then echo "REFUSING to overwrite /dev/vg2a/infongt-eu6-copy on istore2a - Do this by hand"; exit -1; fi'
Executing on istore2a: 'if [[ -e /dev/vg2a/infongt-eu6-tmp ]]; then lvremove -f /dev/vg2a/infongt-eu6-tmp; fi'
Executing on istore2a: 'lvcreate -L 20000000k -n infongt-eu6-tmp vg2a'
  Rounding up size to full physical extent 19.07 GiB
  Logical volume "infongt-eu6-tmp" created
Executing on istore2a: 'mkfs.xfs -dagcount=1024 /dev/vg2a/infongt-eu6-tmp'
meta-data=/dev/vg2a/infongt-eu6-tmp isize=256    agcount=1024, agsize=4883 blks
         =                       sectsz=512   attr=2, projid32bit=0
data     =                       bsize=4096   blocks=5000192, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
Running hook: hook_get_vg hook_get_vg icpu5138
Executing on icpu5138: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5138: 'if [[ -e /dev/vginfong/infongt-eu6-copy ]]; then echo "REFUSING to overwrite /dev/vginfong/infongt-eu6-copy on icpu5138 - Do this by hand"; exit -1; fi'
Executing on icpu5138: 'if [[ -e /dev/vginfong/infongt-eu6-tmp ]]; then lvremove -f /dev/vginfong/infongt-eu6-tmp; fi'
  Logical volume "infongt-eu6-tmp" successfully removed
Executing on icpu5138: 'lvcreate -L 20000000k -n infongt-eu6-tmp vginfong'
  Rounding up size to full physical extent 19.07 GiB
  Logical volume "infongt-eu6-tmp" created
Executing on icpu5138: 'mkfs.xfs -dagcount=1024 /dev/vginfong/infongt-eu6-tmp'
meta-data=/dev/vginfong/infongt-eu6-tmp isize=256    agcount=1024, agsize=4883 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=0        finobt=0
data     =                       bsize=4096   blocks=5000192, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=0
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'if [[ -e /dev/vginfong/infongt-eu6-copy ]]; then echo "REFUSING to overwrite /dev/vginfong/infongt-eu6-copy on icpu5139 - Do this by hand"; exit -1; fi'
Executing on icpu5139: 'if [[ -e /dev/vginfong/infongt-eu6-tmp ]]; then lvremove -f /dev/vginfong/infongt-eu6-tmp; fi'
  Logical volume "infongt-eu6-tmp" successfully removed
Executing on icpu5139: 'lvcreate -L 20000000k -n infongt-eu6-tmp vginfong'
  Rounding up size to full physical extent 19.07 GiB
  Logical volume "infongt-eu6-tmp" created
Executing on icpu5139: 'mkfs.xfs -dagcount=1024 /dev/vginfong/infongt-eu6-tmp'
meta-data=/dev/vginfong/infongt-eu6-tmp isize=256    agcount=1024, agsize=4883 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=0        finobt=0
data     =                       bsize=4096   blocks=5000192, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=0
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
Running hook: hook_get_vg hook_get_vg istore2b
Executing on istore2b: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on istore2b: 'if [[ -e /dev/vg2b/infongt-eu6-copy ]]; then echo "REFUSING to overwrite /dev/vg2b/infongt-eu6-copy on istore2b - Do this by hand"; exit -1; fi'
Executing on istore2b: 'if [[ -e /dev/vg2b/infongt-eu6-tmp ]]; then lvremove -f /dev/vg2b/infongt-eu6-tmp; fi'
Executing on istore2b: 'lvcreate -L 20000000k -n infongt-eu6-tmp vg2b'
  Rounding up size to full physical extent 19.07 GiB
  Logical volume "infongt-eu6-tmp" created
Executing on istore2b: 'mkfs.xfs -dagcount=1024 /dev/vg2b/infongt-eu6-tmp'
meta-data=/dev/vg2b/infongt-eu6-tmp isize=256    agcount=1024, agsize=4883 blks
         =                       sectsz=512   attr=2, projid32bit=0
data     =                       bsize=4096   blocks=5000192, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
Running hook: hook_get_mountpoint hook_get_mountpoint infongt-eu6
Running hook: hook_get_vg hook_get_vg istore2a
Executing on istore2a: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Running hook: hook_connect hook_connect istore2a icpu16 infongt-eu6-tmp
Executing on icpu16: 'iscsiadm -m node -T iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp -u || echo IGNORE'
iscsiadm: No matching sessions found
IGNORE
Executing on istore2a: 'ietadm --op delete --tid=4711 || echo IGNORE'
IGNORE
No such file or directory.
Running hook: hook_get_vg hook_get_vg istore2a
Executing on istore2a: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on istore2a: 'ifconfig eth1'
using iscsi IP '10.46.65.1'
Executing on icpu16: 'ping -c1 10.46.65.1'
PING 10.46.65.1 (10.46.65.1) 56(84) bytes of data.
64 bytes from 10.46.65.1: icmp_seq=1 ttl=64 time=0.110 ms

--- 10.46.65.1 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.110/0.110/0.110/0.000 ms
Executing on istore2a: 'ietadm --op new --tid=4711 --params=Name=iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp'
Executing on istore2a: 'ietadm --op new --tid=4711 --lun=0 --params=Path=/dev/vg2a/infongt-eu6-tmp'
Executing on icpu16: 'iscsiadm -m discovery -p 10.46.65.1 --type sendtargets'
10.46.65.1:3260,1 iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp
10.46.65.1:3260,1 iqn.2003-11.de.schlund:infongt-eu6.icpu16.schlund.de
10.46.65.1:3260,1 iqn.2003-11.de.schlund:infong375.icpu15.schlund.de
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:mywebsite-rolling-1.45.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.237.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.236.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.235.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.234.0
Executing on icpu16: 'ls /dev/sd?'
Executing on icpu16: 'iscsiadm -m node -p 10.46.65.1 -T iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp -l'
Logging in to [iface: default, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260] (multiple)
Login to [iface: default, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260] successful.
Executing on icpu16: 'ls /dev/sd?'
New iscsi tid: 4712
NEW_DEV:/dev/sdc
using tmp dev '/dev/sdc'
Executing on icpu16: 'mkdir -p /vol/infongt-eu6-tmp'
Executing on icpu16: 'mount -o rw,nosuid,noatime,attr2,inode64,usrquota /dev/sdc /vol/infongt-eu6-tmp'
Executing on icpu16: 'for i in {1..3}; do nice -19 ionice -c3 rsync  -aSH --info=STATS  /vol/infongt-eu6/ /vol/infongt-eu6-tmp/ && exit 0; echo RESTARTING $(date); done; exit -1'

sent 1,384,970,565 bytes  received 1,136,002 bytes  15,841,217.91 bytes/sec
total size is 1,381,241,569  speedup is 1.00
Executing on icpu16: 'mountpoint /vol/infongt-eu6 && mountpoint /vol/infongt-eu6-tmp'
/vol/infongt-eu6 is a mountpoint
/vol/infongt-eu6-tmp is a mountpoint
Executing on icpu16: 'xfs_quota -x -c enable '
XFS_QUOTAON: File exists
XFS_QUOTAON: File exists
Executing on icpu16: 'xfs_quota -x -c dump /vol/infongt-eu6'
Executing on icpu16: 'xfs_quota -x -c restore /vol/infongt-eu6-tmp'
Executing on icpu16: 'umount /vol/infongt-eu6-tmp/'
Running hook: hook_disconnect hook_disconnect istore2a icpu16 infongt-eu6-tmp
Executing on icpu16: 'iscsiadm -m node -T iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp -u || echo IGNORE'
Logging out of session [sid: 7, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260]
Logout of [sid: 7, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260] successful.
Executing on istore2a: 'ietadm --op delete --tid=4711 || echo IGNORE'
Running hook: hook_get_mountpoint hook_get_mountpoint infongt-eu6
Running hook: hook_get_vg hook_get_vg istore2a
Executing on istore2a: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on istore2a: 'if [[ -e /dev/vg2a/infongt-eu6-copy ]]; then echo "REFUSING to overwrite /dev/vg2a/infongt-eu6-copy on istore2a - First remove it - Do this by hand"; exit -1; fi'
Executing on istore2a: 'if ! [[ -e /dev/vg2a/infongt-eu6-tmp ]]; then echo "Cannot start hot phase: /dev/vg2a/infongt-eu6-tmp is missing. Run 'prepare' first!"; exit -1; fi'
Running hook: hook_get_mountpoint hook_get_mountpoint infongt-eu6
Running hook: hook_get_vg hook_get_vg istore2a
Executing on istore2a: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Running hook: hook_connect hook_connect istore2a icpu16 infongt-eu6-tmp
Executing on icpu16: 'iscsiadm -m node -T iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp -u || echo IGNORE'
IGNORE
iscsiadm: No matching sessions found
Executing on istore2a: 'ietadm --op delete --tid=4711 || echo IGNORE'
IGNORE
No such file or directory.
Running hook: hook_get_vg hook_get_vg istore2a
Executing on istore2a: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on istore2a: 'ifconfig eth1'
using iscsi IP '10.46.65.1'
Executing on icpu16: 'ping -c1 10.46.65.1'
PING 10.46.65.1 (10.46.65.1) 56(84) bytes of data.
64 bytes from 10.46.65.1: icmp_seq=1 ttl=64 time=0.104 ms

--- 10.46.65.1 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.104/0.104/0.104/0.000 ms
Executing on istore2a: 'ietadm --op new --tid=4711 --params=Name=iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp'
Executing on istore2a: 'ietadm --op new --tid=4711 --lun=0 --params=Path=/dev/vg2a/infongt-eu6-tmp'
Executing on icpu16: 'iscsiadm -m discovery -p 10.46.65.1 --type sendtargets'
10.46.65.1:3260,1 iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp
10.46.65.1:3260,1 iqn.2003-11.de.schlund:infongt-eu6.icpu16.schlund.de
10.46.65.1:3260,1 iqn.2003-11.de.schlund:infong375.icpu15.schlund.de
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:mywebsite-rolling-1.45.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.237.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.236.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.235.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.234.0
Executing on icpu16: 'ls /dev/sd?'
Executing on icpu16: 'iscsiadm -m node -p 10.46.65.1 -T iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp -l'
Logging in to [iface: default, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260] (multiple)
Login to [iface: default, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260] successful.
Executing on icpu16: 'ls /dev/sd?'
New iscsi tid: 4712
NEW_DEV:/dev/sdc
using tmp dev '/dev/sdc'
Executing on icpu16: 'mkdir -p /vol/infongt-eu6-tmp'
Executing on icpu16: 'mount -o rw,nosuid,noatime,attr2,inode64,usrquota /dev/sdc /vol/infongt-eu6-tmp'
Executing on icpu16: 'for i in {1..3}; do time rsync  -aSH --info=STATS --delete /vol/infongt-eu6/ /vol/infongt-eu6-tmp/ && exit 0; echo RESTARTING $(date); done; exit -1'

sent 959,900 bytes  received 4,530 bytes  128,590.67 bytes/sec
total size is 1,381,242,490  speedup is 1,432.19

real	0m7.923s
user	0m0.400s
sys	0m0.876s
Executing on icpu16: 'mountpoint /vol/infongt-eu6 && mountpoint /vol/infongt-eu6-tmp'
/vol/infongt-eu6 is a mountpoint
/vol/infongt-eu6-tmp is a mountpoint
Executing on icpu16: 'xfs_quota -x -c enable '
XFS_QUOTAON: File exists
XFS_QUOTAON: File exists
Executing on icpu16: 'xfs_quota -x -c dump /vol/infongt-eu6'
Executing on icpu16: 'xfs_quota -x -c restore /vol/infongt-eu6-tmp'
Executing on icpu16: 'umount /vol/infongt-eu6-tmp/'
Running hook: hook_disconnect hook_disconnect istore2a icpu16 infongt-eu6-tmp
Executing on icpu16: 'iscsiadm -m node -T iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp -u || echo IGNORE'
Logging out of session [sid: 8, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260]
Logout of [sid: 8, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260] successful.
Executing on istore2a: 'ietadm --op delete --tid=4711 || echo IGNORE'
Running hook: hook_resource_stop_vm hook_resource_stop_vm icpu16 infongt-eu6
Executing on icpu16: 'nodeagent vmstop infongt-eu6'
Set target state 'ASSEMBLED' for instance 'infongt-eu6'
Stop container 'infongt-eu6' 
Routing: currently active instances:  
Routing: currently passive instances: infongt-eu6
Routing (quagga): execute scripts
 |--> /var/lib/nodeagent/instances/infongt-eu6/quagga-peers4.sh
 |--> /var/lib/nodeagent/instances/infongt-eu6/quagga-peers6.sh
Routing (bird): update bird config
 |--> /var/lib/nodeagent/network/bird-static-routes4.conf
 |--> /var/lib/nodeagent/network/bird-static-routes6.conf
 |--> /var/lib/nodeagent/network/bird-peers4.conf
 |--> /var/lib/nodeagent/network/bird-peers6.conf
Running hook: hook_get_mountpoint hook_get_mountpoint infongt-eu6
Running hook: hook_get_vg hook_get_vg istore2a
Executing on istore2a: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Running hook: hook_connect hook_connect istore2a icpu16 infongt-eu6-tmp
Executing on icpu16: 'iscsiadm -m node -T iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp -u || echo IGNORE'
IGNORE
iscsiadm: No matching sessions found
Executing on istore2a: 'ietadm --op delete --tid=4711 || echo IGNORE'
IGNORE
No such file or directory.
Running hook: hook_get_vg hook_get_vg istore2a
Executing on istore2a: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on istore2a: 'ifconfig eth1'
using iscsi IP '10.46.65.1'
Executing on icpu16: 'ping -c1 10.46.65.1'
PING 10.46.65.1 (10.46.65.1) 56(84) bytes of data.
64 bytes from 10.46.65.1: icmp_seq=1 ttl=64 time=0.109 ms

--- 10.46.65.1 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.109/0.109/0.109/0.000 ms
Executing on istore2a: 'ietadm --op new --tid=4711 --params=Name=iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp'
Executing on istore2a: 'ietadm --op new --tid=4711 --lun=0 --params=Path=/dev/vg2a/infongt-eu6-tmp'
Executing on icpu16: 'iscsiadm -m discovery -p 10.46.65.1 --type sendtargets'
10.46.65.1:3260,1 iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp
10.46.65.1:3260,1 iqn.2003-11.de.schlund:infongt-eu6.icpu16.schlund.de
10.46.65.1:3260,1 iqn.2003-11.de.schlund:infong375.icpu15.schlund.de
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:mywebsite-rolling-1.45.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.237.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.236.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.235.0
10.46.65.1:3260,1 iqn.2014-01.de.schlund:cbi:default-stable-0.234.0
Executing on icpu16: 'ls /dev/sd?'
Executing on icpu16: 'iscsiadm -m node -p 10.46.65.1 -T iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp -l'
Logging in to [iface: default, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260] (multiple)
Login to [iface: default, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260] successful.
Executing on icpu16: 'ls /dev/sd?'
New iscsi tid: 4712
NEW_DEV:/dev/sdc
using tmp dev '/dev/sdc'
Executing on icpu16: 'mkdir -p /vol/infongt-eu6-tmp'
Executing on icpu16: 'mount -o rw,nosuid,noatime,attr2,inode64,usrquota /dev/sdc /vol/infongt-eu6-tmp'
Executing on icpu16: 'for i in {1..3}; do time rsync  -aSH --info=STATS --delete /vol/infongt-eu6/ /vol/infongt-eu6-tmp/ && exit 0; echo RESTARTING $(date); done; exit -1'

sent 10,102,193 bytes  received 4,647 bytes  1,837,607.27 bytes/sec
total size is 1,381,250,533  speedup is 136.66

real	0m4.817s
user	0m0.400s
sys	0m1.036s
Executing on icpu16: 'mountpoint /vol/infongt-eu6 && mountpoint /vol/infongt-eu6-tmp'
/vol/infongt-eu6 is a mountpoint
/vol/infongt-eu6-tmp is a mountpoint
Executing on icpu16: 'xfs_quota -x -c enable '
XFS_QUOTAON: File exists
XFS_QUOTAON: File exists
Executing on icpu16: 'xfs_quota -x -c dump /vol/infongt-eu6'
Executing on icpu16: 'xfs_quota -x -c restore /vol/infongt-eu6-tmp'
Executing on icpu16: 'umount /vol/infongt-eu6-tmp/'
Running hook: hook_disconnect hook_disconnect istore2a icpu16 infongt-eu6-tmp
Executing on icpu16: 'iscsiadm -m node -T iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp -u || echo IGNORE'
Logging out of session [sid: 9, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260]
Logout of [sid: 9, target: iqn.2000-01.info.test:test.infongt-eu6-tmp.tmp, portal: 10.46.65.1,3260] successful.
Executing on istore2a: 'ietadm --op delete --tid=4711 || echo IGNORE'
Running hook: hook_resource_stop_rest hook_resource_stop_rest icpu16 istore2a infongt-eu6
Executing on icpu16: 'nodeagent stop infongt-eu6'
Set target state 'ASSEMBLED' for instance 'infongt-eu6'
No-Op: Container 'infongt-eu6' already stopped.
Routing: currently active instances:  
Routing: currently passive instances: infongt-eu6
Routing (quagga): execute scripts
 |--> /var/lib/nodeagent/instances/infongt-eu6/quagga-peers4.sh
 |--> /var/lib/nodeagent/instances/infongt-eu6/quagga-peers6.sh
Routing (bird): update bird config
 |--> /var/lib/nodeagent/network/bird-static-routes4.conf
 |--> /var/lib/nodeagent/network/bird-static-routes6.conf
 |--> /var/lib/nodeagent/network/bird-peers4.conf
 |--> /var/lib/nodeagent/network/bird-peers6.conf
Set target state 'CONFIGURED' for instance 'infongt-eu6'
No-Op: No mntpoint defined for volume tmp-chroots
Clean up volume 'tmp-chroots' from source 'filesys'
Unmount /vol/infongt-eu6
 |--> umount /vol/infongt-eu6
Clean up volume 'import' from source 'iscsi'
Logout from portal 10.46.65.1 iqn iqn.2003-11.de.schlund:infongt-eu6.icpu16.schlund.de
 |--> iscsiadm -m node --logout -p 10.46.65.1 -T iqn.2003-11.de.schlund:infongt-eu6.icpu16.schlund.de
 |--> UMOUNT: --
Clean up volume 'mountall' from source 'command'
 |--> CLEANUP: --
Cleanup static routes to container
 |--> Quagga6: vtysh -c "conf t" -c "no ip route 2001:8D8:5FF:5B:212:227:24:82/128 intbr0"
 |--> Bird6: 
 |--> Quagga4: vtysh -c "conf t" -c "no ip route 212.227.24.82/32 intbr0"
 |--> Bird4: 
Cleanup BGP peer configuration to container
 |--> Quagga4: vtysh -c "conf t" -c "router bgp 8560" -c "bgp router-id 0.0.0.0" -c "neighbor 169.254.254.16 peer-group PRIVATE_PEER_GROUP_V4"
 |--> Bird4: 
 |--> Quagga6: vtysh -c "conf t" -c "router bgp 8560" -c "bgp router-id 0.0.0.0" -c "neighbor fdc0:baa1:feed:ff:169:254:254:16 peer-group PRIVATE_PEER_GROUP_V6"
 |--> Bird6: 
Destroy container 'infongt-eu6'
Executing on icpu16: 'mountpoint /vol/infongt-eu6 && { umount -f /vol/infongt-eu6 ; exit $?; } || true'
/vol/infongt-eu6 is not a mountpoint
Executing on istore2a: 'cm3 --stop infongt-eu6 || cm3 --stop infongt-eu6 || { mountpoint /vol/infongt-eu6 && umount /vol/infongt-eu6; } || false'
Shutdown infongt-eu6.
stop: UPDATE mars_infongt-eu6  ...... OK [0s]
stop: UPDATE iet_infongt-eu6 ...... OK
stop: infongt-eu6.schlund.de is updated.
stop: STOP infongt-eu6.schlund.de  ...(vmstop:120s) (dissemble:120s) (delete) ... OK [1s]
stop: UPDATE icpu16.schlund.de  ...... OK [1s]
stop: icpu16.schlund.de is updated.
stop: Skipped 'update_prev_vmhost' since no previous VMHost is linked with infongt-eu6.schlund.de
stop: VM infongt-eu6.schlund.de is stopped.
stop: Clearing VMHost for infongt-eu6.schlund.de, no longer using icpu16.schlund.de
stop: Stopping storage for infongt-eu6.schlund.de
stop: DOWN iet_infongt-eu6  ...(remove_tid) ... OK [0s]
stop: DOWN mars_infongt-eu6  ...(wait-umount:20s) (switch-secondary:120s) ... OK [6s]
stop: DOWN /dev/vg2a/infongt-eu6  ...... OK [0s]
stop: infongt-eu6.schlund.de is stopped.
stop: COMMAND FINISHED in 8 seconds
Shutdown of infongt-eu6.schlund.de finished.
Executing on icpu16: 'rmdir /vol/infongt-eu6-tmp || echo IGNORE'
Running hook: hook_disconnect hook_disconnect istore2a icpu16 infongt-eu6 1
Executing on icpu16: 'iscsiadm -m node -T iqn.2000-01.info.test:test.infongt-eu6.tmp -u || echo IGNORE'
IGNORE
iscsiadm: No matching sessions found
Executing on istore2a: 'ietadm --op delete --tid=4712 || echo IGNORE'
IGNORE
No such file or directory.
Executing on istore2a: 'marsadm wait-umount infongt-eu6'
OK, device for resource 'infongt-eu6' is not in use.
Executing on istore2a: 'marsadm secondary infongt-eu6'
---------------------------- check preconditions:
Current designated primary: (none)
---------------------------- leave primary state:
---------------------------- wait for effect:
device '/dev/mars/infongt-eu6' is no longer present
Running hook: hook_get_vg hook_get_vg istore2a
Executing on istore2a: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on istore2a: 'marsadm down infongt-eu6 || echo IGNORE'
---------------------------- check preconditions:
---------------------------- switch state:
successfully started pause-replay-local on resource infongt-eu6
successfully started pause-sync-local on resource infongt-eu6
successfully started pause-fetch on resource infongt-eu6
successfully started detach on resource infongt-eu6
---------------------------- wait for effect:
waiting until actual 'is-attached' == '0'...
OK, '/mars/resource-infongt-eu6/actual-istore2a/is-attached' has acceptable value '0'
device '/dev/mars/infongt-eu6' is no longer present
OK, '/mars/resource-infongt-eu6/actual-istore2a/is-replaying' has acceptable value '0'
OK, '/mars/resource-infongt-eu6/actual-istore2a/is-syncing' has acceptable value '0'
Executing on istore2a: 'marsadm leave-resource --force infongt-eu6 || echo IGNORE'
WARNING: Using FORCE option -- hopefully you know what you are doing!
---------------------------- check preconditions:
---------------------------- switch state:
---------------------------- wait for deletions:
deleted: 001595688 / 1595739
waiting for deletions to apply locally....
deleted: 001595739 / 1595739
found replay link '/mars/resource-infongt-eu6/replay-icpu5138' -> 'log-000014328-istore2a,3016820,0'
found replay link '/mars/resource-infongt-eu6/replay-icpu5139' -> 'log-000014328-istore2a,3016820,0'
found replay link '/mars/resource-infongt-eu6/replay-istore2b' -> 'log-000014328-istore2a,3016820,0'
found replay link '/mars/resource-infongt-eu6/replay-icpu5138' -> 'log-000014328-istore2a,3016820,0'
found replay link '/mars/resource-infongt-eu6/replay-icpu5139' -> 'log-000014328-istore2a,3016820,0'
found replay link '/mars/resource-infongt-eu6/replay-istore2b' -> 'log-000014328-istore2a,3016820,0'
checking 'version-000014326-icpu5138'
  corresponding logfile is 'log-000014326-istore2a'
  ok 'version-000014326-icpu5138'
checking 'version-000014326-icpu5139'
  corresponding logfile is 'log-000014326-istore2a'
  ok 'version-000014326-icpu5139'
checking 'version-000014326-istore2a'
  corresponding logfile is 'log-000014326-istore2a'
  ok 'version-000014326-istore2a'
checking 'version-000014326-istore2b'
  corresponding logfile is 'log-000014326-istore2a'
  ok 'version-000014326-istore2b'
checking 'version-000014327-icpu5138'
  corresponding logfile is 'log-000014327-istore2a'
  ok 'version-000014327-icpu5138'
checking 'version-000014327-icpu5139'
  corresponding logfile is 'log-000014327-istore2a'
  ok 'version-000014327-icpu5139'
checking 'version-000014327-istore2a'
  corresponding logfile is 'log-000014327-istore2a'
  ok 'version-000014327-istore2a'
checking 'version-000014327-istore2b'
  corresponding logfile is 'log-000014327-istore2a'
  ok 'version-000014327-istore2b'
checking 'version-000014328-icpu5138'
  corresponding logfile is 'log-000014328-istore2a'
  ok 'version-000014328-icpu5138'
checking 'version-000014328-icpu5139'
  corresponding logfile is 'log-000014328-istore2a'
  ok 'version-000014328-icpu5139'
checking 'version-000014328-istore2a'
  corresponding logfile is 'log-000014328-istore2a'
  ok 'version-000014328-istore2a'
checking 'version-000014328-istore2b'
  corresponding logfile is 'log-000014328-istore2a'
  ok 'version-000014328-istore2b'
checking 'log-000014327-istore2a'
  ok 'log-000014327-istore2a'
checking 'log-000014328-istore2a'
  ok 'log-000014328-istore2a'
info: logfile 'log-000014326-istore2a' is referenced (4), but not present.
  Unreferenced logfiles are not necessarily bad.
  They can regularly appear after 'leave-resource',
  or 'invalidate', or after emergency mode,
  or after similar operations.
deleted: 001595739 / 1595739
deleted: 001595739 / 1595739
Executing on istore2a: 'lvrename vg2a infongt-eu6 infongt-eu6-copy'
  Renamed "infongt-eu6" to "infongt-eu6-copy" in volume group "vg2a"
Executing on istore2a: 'lvrename vg2a infongt-eu6-tmp infongt-eu6'
  Renamed "infongt-eu6-tmp" to "infongt-eu6" in volume group "vg2a"
Running hook: hook_get_vg hook_get_vg icpu5138
Executing on icpu5138: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5138: 'marsadm down infongt-eu6 || echo IGNORE'
---------------------------- check preconditions:
---------------------------- switch state:
successfully started pause-replay-local on resource infongt-eu6
successfully started pause-sync-local on resource infongt-eu6
successfully started pause-fetch on resource infongt-eu6
successfully started detach on resource infongt-eu6
---------------------------- wait for effect:
waiting until actual 'is-attached' == '0'...
OK, '/mars/resource-infongt-eu6/actual-icpu5138/is-attached' has acceptable value '0'
device '/dev/mars/infongt-eu6' is no longer present
OK, '/mars/resource-infongt-eu6/actual-icpu5138/is-replaying' has acceptable value '0'
OK, '/mars/resource-infongt-eu6/actual-icpu5138/is-syncing' has acceptable value '0'
Executing on icpu5138: 'marsadm leave-resource --force infongt-eu6 || echo IGNORE'
WARNING: Using FORCE option -- hopefully you know what you are doing!
---------------------------- check preconditions:
---------------------------- switch state:
---------------------------- wait for deletions:
deleted: 001595739 / 1595795
waiting for deletions to apply locally....
deleted: 001595795 / 1595795
found replay link '/mars/resource-infongt-eu6/replay-icpu5139' -> 'log-000014328-istore2a,3016820,0'
found replay link '/mars/resource-infongt-eu6/replay-istore2b' -> 'log-000014328-istore2a,3016820,0'
found replay link '/mars/resource-infongt-eu6/replay-icpu5139' -> 'log-000014328-istore2a,3016820,0'
found replay link '/mars/resource-infongt-eu6/replay-istore2b' -> 'log-000014328-istore2a,3016820,0'
checking 'version-000014327-icpu5138'
  corresponding logfile is 'log-000014327-istore2a'
checking 'version-000014327-icpu5139'
  corresponding logfile is 'log-000014327-istore2a'
  ok 'version-000014327-icpu5139'
checking 'version-000014327-istore2a'
  corresponding logfile is 'log-000014327-istore2a'
  ok 'version-000014327-istore2a'
checking 'version-000014327-istore2b'
  corresponding logfile is 'log-000014327-istore2a'
  ok 'version-000014327-istore2b'
checking 'version-000014328-icpu5138'
  corresponding logfile is 'log-000014328-istore2a'
checking 'version-000014328-icpu5139'
  corresponding logfile is 'log-000014328-istore2a'
  ok 'version-000014328-icpu5139'
checking 'version-000014328-istore2a'
  corresponding logfile is 'log-000014328-istore2a'
  ok 'version-000014328-istore2a'
checking 'version-000014328-istore2b'
  corresponding logfile is 'log-000014328-istore2a'
  ok 'version-000014328-istore2b'
checking 'log-000014328-istore2a'
  ok 'log-000014328-istore2a'
info: logfile 'log-000014327-istore2a' is referenced (3), but not present.
  Unreferenced logfiles are not necessarily bad.
  They can regularly appear after 'leave-resource',
  or 'invalidate', or after emergency mode,
  or after similar operations.
deleted: 001595795 / 1595797
waiting for deletions to apply locally....
deleted: 001595797 / 1595797
deleted: 001595797 / 1595797
Executing on icpu5138: 'lvrename vginfong infongt-eu6 infongt-eu6-copy'
  Renamed "infongt-eu6" to "infongt-eu6-copy" in volume group "vginfong"
Executing on icpu5138: 'lvrename vginfong infongt-eu6-tmp infongt-eu6'
  Renamed "infongt-eu6-tmp" to "infongt-eu6" in volume group "vginfong"
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'marsadm down infongt-eu6 || echo IGNORE'
---------------------------- check preconditions:
---------------------------- switch state:
successfully started pause-replay-local on resource infongt-eu6
successfully started pause-sync-local on resource infongt-eu6
successfully started pause-fetch on resource infongt-eu6
successfully started detach on resource infongt-eu6
---------------------------- wait for effect:
waiting until actual 'is-attached' == '0'...
OK, '/mars/resource-infongt-eu6/actual-icpu5139/is-attached' has acceptable value '0'
device '/dev/mars/infongt-eu6' is no longer present
OK, '/mars/resource-infongt-eu6/actual-icpu5139/is-replaying' has acceptable value '0'
OK, '/mars/resource-infongt-eu6/actual-icpu5139/is-syncing' has acceptable value '0'
Executing on icpu5139: 'marsadm leave-resource --force infongt-eu6 || echo IGNORE'
WARNING: Using FORCE option -- hopefully you know what you are doing!
---------------------------- check preconditions:
---------------------------- switch state:
---------------------------- wait for deletions:
deleted: 001595797 / 1595845
waiting for deletions to apply locally....
deleted: 001595845 / 1595845
found replay link '/mars/resource-infongt-eu6/replay-istore2b' -> 'log-000014328-istore2a,3016820,0'
found replay link '/mars/resource-infongt-eu6/replay-istore2b' -> 'log-000014328-istore2a,3016820,0'
checking 'version-000014327-icpu5139'
  corresponding logfile is 'log-000014327-istore2a'
checking 'version-000014327-istore2a'
  corresponding logfile is 'log-000014327-istore2a'
  ok 'version-000014327-istore2a'
checking 'version-000014327-istore2b'
  corresponding logfile is 'log-000014327-istore2a'
  ok 'version-000014327-istore2b'
checking 'version-000014328-icpu5139'
  corresponding logfile is 'log-000014328-istore2a'
checking 'version-000014328-istore2a'
  corresponding logfile is 'log-000014328-istore2a'
  ok 'version-000014328-istore2a'
checking 'version-000014328-istore2b'
  corresponding logfile is 'log-000014328-istore2a'
  ok 'version-000014328-istore2b'
checking 'log-000014328-istore2a'
  ok 'log-000014328-istore2a'
info: logfile 'log-000014327-istore2a' is referenced (2), but not present.
  Unreferenced logfiles are not necessarily bad.
  They can regularly appear after 'leave-resource',
  or 'invalidate', or after emergency mode,
  or after similar operations.
deleted: 001595845 / 1595847
waiting for deletions to apply locally....
deleted: 001595847 / 1595847
deleted: 001595847 / 1595847
Executing on icpu5139: 'lvrename vginfong infongt-eu6 infongt-eu6-copy'
  Renamed "infongt-eu6" to "infongt-eu6-copy" in volume group "vginfong"
Executing on icpu5139: 'lvrename vginfong infongt-eu6-tmp infongt-eu6'
  Renamed "infongt-eu6-tmp" to "infongt-eu6" in volume group "vginfong"
Running hook: hook_get_vg hook_get_vg istore2b
Executing on istore2b: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on istore2b: 'marsadm down infongt-eu6 || echo IGNORE'
---------------------------- check preconditions:
---------------------------- switch state:
successfully started pause-replay-local on resource infongt-eu6
successfully started pause-sync-local on resource infongt-eu6
successfully started pause-fetch on resource infongt-eu6
successfully started detach on resource infongt-eu6
---------------------------- wait for effect:
waiting until actual 'is-attached' == '0'...
OK, '/mars/resource-infongt-eu6/actual-istore2b/is-attached' has acceptable value '0'
device '/dev/mars/infongt-eu6' is no longer present
OK, '/mars/resource-infongt-eu6/actual-istore2b/is-replaying' has acceptable value '0'
OK, '/mars/resource-infongt-eu6/actual-istore2b/is-syncing' has acceptable value '0'
Executing on istore2b: 'marsadm leave-resource --force infongt-eu6 || echo IGNORE'
WARNING: Using FORCE option -- hopefully you know what you are doing!
---------------------------- check preconditions:
---------------------------- switch state:
---------------------------- wait for deletions:
deleted: 001595847 / 1595897
waiting for deletions to apply locally....
deleted: 001595897 / 1595897
Resource contains no valid information - there is nothing to purge
deleted: 001595897 / 1595897
Executing on istore2b: 'lvrename vg2b infongt-eu6 infongt-eu6-copy'
  Renamed "infongt-eu6" to "infongt-eu6-copy" in volume group "vg2b"
Executing on istore2b: 'lvrename vg2b infongt-eu6-tmp infongt-eu6'
  Renamed "infongt-eu6-tmp" to "infongt-eu6" in volume group "vg2b"
Executing on istore2a: 'marsadm delete-resource infongt-eu6 || echo IGNORE'
deleted: 001595897 / 1596003
waiting for deletions to apply locally....
deleted: 001596003 / 1596003
Executing on istore2a: 'marsadm create-resource --force infongt-eu6 /dev/vg2a/infongt-eu6'
WARNING: Using FORCE option -- hopefully you know what you are doing!
WARNING: resource directory 'infongt-eu6' already exists
creating new resource 'infongt-eu6'
block device '/dev/vg2a/infongt-eu6': determined size = 20480786432 bytes
using existing device '/dev/vg2a/infongt-eu6'
resource 'infongt-eu6' will appear as local device '/dev/mars/infongt-eu6'
successfully created resource 'infongt-eu6'
Executing on istore2a: 'marsadm primary infongt-eu6'
---------------------------- check preconditions:
Current designated primary: istore2a
OK, '/mars/resource-infongt-eu6/todo-istore2a/attach' has acceptable value '1'
OK, '/mars/resource-infongt-eu6/todo-istore2a/connect' has acceptable value '1'
OK, '/mars/resource-infongt-eu6/todo-istore2a/allow-replay' has acceptable value '1'
---------------------------- leave primary state:
---------------------------- wait when necessary:
---------------------------- switch to primary:
designated primary changed from 'istore2a' to 'istore2a'
---------------------------- wait for device:
device '/dev/mars/infongt-eu6' not yet present
device '/dev/mars/infongt-eu6' is present
Running hook: hook_resource_start hook_resource_start istore2a infongt-eu6
Executing on istore2a: 'marsadm wait-cluster'
all 5 peer(s) seem to be alive
Executing on istore2a: 'service clustermanager restart'
Updating Clustermanager config: daemon.conf.
Restarting Clustermanager: clustermanagerd (quit) (start).
Executing on istore2a: 'marsadm primary infongt-eu6'
---------------------------- check preconditions:
Current designated primary: istore2a
OK, '/mars/resource-infongt-eu6/todo-istore2a/attach' has acceptable value '1'
OK, '/mars/resource-infongt-eu6/todo-istore2a/connect' has acceptable value '1'
OK, '/mars/resource-infongt-eu6/todo-istore2a/allow-replay' has acceptable value '1'
---------------------------- leave primary state:
---------------------------- wait when necessary:
---------------------------- switch to primary:
designated primary changed from 'istore2a' to 'istore2a'
---------------------------- wait for device:
device '/dev/mars/infongt-eu6' is present
Executing on istore2a: 'cm3 --stop infongt-eu6; cm3 --start infongt-eu6 || { cm3 --stop infongt-eu6; cm3 --start infongt-eu6; } || false'
Shutdown infongt-eu6.
stop: Delay of 5 seconds. Still reading initial configuration and updating status.
stop: UPDATE mars_infongt-eu6  ...... OK [0s]
stop: UPDATE iet_infongt-eu6 ...... OK
stop: infongt-eu6.schlund.de is updated.
stop: Skipped 'vmhandler_stop' since no VMHost is linked with infongt-eu6.schlund.de
stop: Skipped 'update_vmhost' since no VMHost is linked with infongt-eu6.schlund.de
stop: Skipped 'update_prev_vmhost' since no previous VMHost is linked with infongt-eu6.schlund.de
stop: VM infongt-eu6.schlund.de is stopped.
stop: Stopping storage for infongt-eu6.schlund.de
stop: DOWN iet_infongt-eu6  ...... OK (skipped) [0s]
stop: DOWN mars_infongt-eu6  ...(wait-umount:20s) (switch-secondary:120s) ... OK [3s]
stop: DOWN /dev/vg2a/infongt-eu6  ...... OK [0s]
stop: infongt-eu6.schlund.de is stopped.
stop: COMMAND FINISHED in 8 seconds
Shutdown of infongt-eu6.schlund.de finished.
Startup infongt-eu6.
start: UPDATE mars_infongt-eu6  ...... OK [0s]
start: UPDATE iet_infongt-eu6 ...... OK
start: infongt-eu6.schlund.de is updated.
start: Using VMHost 'icpu16.schlund.de' (policy: 'free')
start: Reserving VMHost icpu16.schlund.de
start: Starting storage for infongt-eu6.schlund.de
start: UP /dev/vg2a/infongt-eu6  ...... OK (skipped) [0s]
start: UP mars_infongt-eu6  ...(switch-primary:120s) ... OK [8s]
start: UP iet_infongt-eu6  ...(create_tid) (create_lun) (config_user) ... OK [3s]
start: START infongt-eu6.schlund.de  ...(init) (assemble:300s) (vmstart:300s) ... OK [3s]
start: UPDATE icpu16.schlund.de  ...... OK [1s]
start: icpu16.schlund.de is updated.
start: infongt-eu6.schlund.de is started.
start: COMMAND FINISHED in 15 seconds
Startup of infongt-eu6.schlund.de finished.
Running hook: hook_get_vg hook_get_vg icpu5138
Executing on icpu5138: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Running hook: hook_join_resource hook_join_resource istore2a icpu5138 infongt-eu6 /dev/vginfong/infongt-eu6
Executing on icpu5138: 'marsadm join-resource --ssh-port=24 infongt-eu6 /dev/vginfong/infongt-eu6'
Using SSH port '24' from command line.
joining to existing resource 'infongt-eu6'
block device '/dev/vginfong/infongt-eu6': determined size = 20480786432 bytes
PING istore2a.schlund.de (10.46.98.4) 56(84) bytes of data.
64 bytes from istore2a.schlund.de (10.46.98.4): icmp_seq=1 ttl=64 time=0.221 ms

--- istore2a.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.221/0.221/0.221/0.000 ms
ssh: connect to host istore2a port 24: Connection refused
Linux istore2a 3.2.45-istore-20130805 #1 SMP Mon Aug 5 13:36:58 CEST 2013 x86_64 GNU/Linux
receiving incremental file list
.deleted-actsize-istore2a -> 1
.deleted-data-istore2a -> 1
.deleted-device-istore2a -> 1
.deleted-replay-istore2a -> 1
.deleted-skip-check-istore2a -> 1
.deleted-syncpos-istore2a -> 1
.deleted-syncstatus-istore2a -> 1
.deleted-verifystatus-istore2a -> 1
.deleted-version-000014325-istore2b -> 1
replay-istore2a -> log-000015327-istore2a,2071996,68500
skip-check-istore2a -> 15327
version-000015327-istore2a -> fcb6611922007b0c7efb8eee529ee47e,log-000015327-istore2a,2140496:00000000000000000000000000000000,log-000015326-istore2a,0
actual-icpu5139/
actual-istore2a/.deleted- -> 1
actual-istore2a/.deleted-copy-syncstatus-istore2a -> 1
actual-istore2a/.deleted-device-istore2a -> 1
actual-istore2a/.deleted-file_rate -> 1
actual-istore2a/.deleted-has-emergency -> 1
actual-istore2a/.deleted-is-attached -> 1
actual-istore2a/.deleted-is-copying -> 1
actual-istore2a/.deleted-is-emergency -> 1
actual-istore2a/.deleted-is-primary -> 1
actual-istore2a/.deleted-is-replaying -> 1
actual-istore2a/.deleted-is-syncing -> 1
actual-istore2a/.deleted-logfile-update -> 1
actual-istore2a/.deleted-open-count -> 1
actual-istore2a/.deleted-replay-code -> 1
actual-istore2a/.deleted-replay_rate -> 1
actual-istore2a/.deleted-sync_rate -> 1
actual-istore2b/
defaults-icpu5138/
defaults-icpu5139/
defaults-istore2a/
defaults-istore2a/.deleted- -> 1
defaults-istore2b/
local-icpu5138/
local-istore2a/
local-istore2a/.deleted- -> 1
todo-icpu5138/
todo-istore2a/.deleted-allow-replay -> 1
todo-istore2a/.deleted-attach -> 1
todo-istore2a/.deleted-connect -> 1
todo-istore2a/.deleted-sync -> 1
todo-istore2b/
todo-istore2b/.deleted- -> 1
userspace/

sent 341 bytes  received 20,679 bytes  14,013.33 bytes/sec
total size is 2,142,761  speedup is 101.94
all 5 peer(s) seem to be alive
using existing device '/dev/vginfong/infongt-eu6'
resource 'infongt-eu6' will appear as local device '/dev/mars/infongt-eu6'
creating new replaylink '/mars/resource-infongt-eu6/replay-icpu5138' -> 'log-000015327-istore2a,0,0'
creating new version symlink '/mars/resource-infongt-eu6/version-000015326-icpu5138' -> '00000000000000000000000000000000,log-000015326-istore2a,0:'
WARNING: cannot read symlink '/mars/resource-infongt-eu6/version-000015325-istore2a'
cannot create new version symlink '/mars/resource-infongt-eu6/version-000015325-icpu5138'
sending incremental file list
data-icpu5138 -> /dev/vginfong/infongt-eu6

sent 75 bytes  received 18 bytes  186.00 bytes/sec
total size is 25  speedup is 0.27
successfully joined resource 'infongt-eu6'
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Running hook: hook_join_resource hook_join_resource istore2a icpu5139 infongt-eu6 /dev/vginfong/infongt-eu6
Executing on icpu5139: 'marsadm join-resource --ssh-port=24 infongt-eu6 /dev/vginfong/infongt-eu6'
Using SSH port '24' from command line.
joining to existing resource 'infongt-eu6'
block device '/dev/vginfong/infongt-eu6': determined size = 20480786432 bytes
PING istore2a.schlund.de (10.46.98.4) 56(84) bytes of data.
64 bytes from istore2a.schlund.de (10.46.98.4): icmp_seq=1 ttl=61 time=1.00 ms

--- istore2a.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 1.001/1.001/1.001/0.000 ms
ssh: connect to host istore2a port 24: Connection refused
Linux istore2a 3.2.45-istore-20130805 #1 SMP Mon Aug 5 13:36:58 CEST 2013 x86_64 GNU/Linux
receiving incremental file list
.deleted-actsize-istore2a -> 1
.deleted-data-istore2a -> 1
.deleted-device-istore2a -> 1
.deleted-replay-istore2a -> 1
.deleted-skip-check-istore2a -> 1
.deleted-syncpos-istore2a -> 1
.deleted-syncstatus-istore2a -> 1
.deleted-verifystatus-istore2a -> 1
.deleted-version-000014325-istore2b -> 1
.deleted-version-000014327-icpu5138 -> 1
skip-check-istore2a -> 15327
actual-istore2a/.deleted- -> 1
actual-istore2a/.deleted-copy-syncstatus-istore2a -> 1
actual-istore2a/.deleted-device-istore2a -> 1
actual-istore2a/.deleted-file_rate -> 1
actual-istore2a/.deleted-has-emergency -> 1
actual-istore2a/.deleted-is-attached -> 1
actual-istore2a/.deleted-is-copying -> 1
actual-istore2a/.deleted-is-emergency -> 1
actual-istore2a/.deleted-is-primary -> 1
actual-istore2a/.deleted-is-replaying -> 1
actual-istore2a/.deleted-is-syncing -> 1
actual-istore2a/.deleted-logfile-update -> 1
actual-istore2a/.deleted-open-count -> 1
actual-istore2a/.deleted-replay-code -> 1
actual-istore2a/.deleted-replay_rate -> 1
actual-istore2a/.deleted-sync_rate -> 1
actual-istore2b/.deleted- -> 1
actual-istore2b/.deleted-open-count -> 1
actual-istore2b/.deleted-replay-code -> 1
actual-istore2b/.deleted-replay_rate -> 1
actual-istore2b/.deleted-sync_rate -> 1
defaults-icpu5138/
defaults-icpu5139/
defaults-istore2a/
defaults-istore2a/.deleted- -> 1
defaults-istore2b/
defaults-istore2b/.deleted- -> 1
defaults/
local-icpu5138/
local-istore2a/
local-istore2a/.deleted- -> 1
todo-icpu5138/
todo-icpu5138/.deleted- -> 1
todo-icpu5139/
todo-istore2a/
todo-istore2a/.deleted- -> 1
todo-istore2a/.deleted-allow-replay -> 1
todo-istore2a/.deleted-attach -> 1
todo-istore2a/.deleted-connect -> 1
todo-istore2a/.deleted-sync -> 1
todo-istore2b/
todo-istore2b/.deleted-allow-replay -> 1
todo-istore2b/.deleted-attach -> 1
todo-istore2b/.deleted-connect -> 1
todo-istore2b/.deleted-sync -> 1
userspace/

sent 275 bytes  received 22,126 bytes  14,934.00 bytes/sec
total size is 2,148,777  speedup is 95.92
all 5 peer(s) seem to be alive
using existing device '/dev/vginfong/infongt-eu6'
resource 'infongt-eu6' will appear as local device '/dev/mars/infongt-eu6'
creating new replaylink '/mars/resource-infongt-eu6/replay-icpu5139' -> 'log-000015327-istore2a,0,0'
creating new version symlink '/mars/resource-infongt-eu6/version-000015326-icpu5139' -> '00000000000000000000000000000000,log-000015326-istore2a,0:'
WARNING: cannot read symlink '/mars/resource-infongt-eu6/version-000015325-istore2a'
cannot create new version symlink '/mars/resource-infongt-eu6/version-000015325-icpu5139'
sending incremental file list
data-icpu5139 -> /dev/vginfong/infongt-eu6

sent 75 bytes  received 18 bytes  62.00 bytes/sec
total size is 25  speedup is 0.27
successfully joined resource 'infongt-eu6'
Running hook: hook_get_vg hook_get_vg istore2b
Executing on istore2b: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Running hook: hook_join_resource hook_join_resource istore2a istore2b infongt-eu6 /dev/vg2b/infongt-eu6
Executing on istore2b: 'marsadm join-resource --ssh-port=24 infongt-eu6 /dev/vg2b/infongt-eu6'
Using SSH port '24' from command line.
joining to existing resource 'infongt-eu6'
block device '/dev/vg2b/infongt-eu6': determined size = 20480786432 bytes
PING istore2a.schlund.de (10.46.98.4) 56(84) bytes of data.
64 bytes from istore2a.schlund.de (10.46.98.4): icmp_req=1 ttl=61 time=1.34 ms

--- istore2a.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 1.346/1.346/1.346/0.000 ms
ssh: connect to host istore2a port 24: Connection refused
Linux istore2a 3.2.45-istore-20130805 #1 SMP Mon Aug 5 13:36:58 CEST 2013 x86_64 GNU/Linux
receiving incremental file list
./
.deleted-actsize-icpu5138 -> 1
.deleted-data-icpu5138 -> 1
.deleted-device-icpu5138 -> 1
.deleted-log-000014325-istore2a -> 1
.deleted-log-000014327-istore2a -> 1
.deleted-replay-icpu5138 -> 1
.deleted-skip-check-icpu5138 -> 1
.deleted-syncpos-icpu5138 -> 1
.deleted-syncstatus-icpu5138 -> 1
.deleted-verifystatus-icpu5138 -> 1
.deleted-version-000014324-icpu5138 -> 1
.deleted-version-000014324-icpu5139 -> 1
.deleted-version-000014324-istore2a -> 1
.deleted-version-000014326-icpu5138 -> 1
.deleted-version-000014326-icpu5139 -> 1
.deleted-version-000014326-istore2a -> 1
.deleted-version-000014326-istore2b -> 1
skip-check-istore2a -> 15327
actual-icpu5138/.deleted- -> 1
actual-icpu5138/.deleted-copy-syncstatus-icpu5138 -> 1
actual-icpu5138/.deleted-file_rate -> 1
actual-icpu5138/.deleted-has-emergency -> 1
actual-icpu5138/.deleted-is-attached -> 1
actual-icpu5138/.deleted-is-copying -> 1
actual-icpu5138/.deleted-is-emergency -> 1
actual-icpu5138/.deleted-is-primary -> 1
actual-icpu5138/.deleted-is-replaying -> 1
actual-icpu5138/.deleted-is-syncing -> 1
actual-icpu5138/.deleted-logfile-update -> 1
actual-icpu5138/.deleted-open-count -> 1
actual-icpu5138/.deleted-replay-code -> 1
actual-icpu5138/.deleted-replay_rate -> 1
actual-icpu5138/.deleted-sync_rate -> 1
actual-icpu5139/
actual-istore2a/
actual-istore2b/
defaults-icpu5138/
defaults-icpu5138/.deleted- -> 1
defaults-icpu5139/
defaults-istore2b/
local-icpu5138/
local-icpu5138/.deleted- -> 1
local-istore2a/
local-istore2a/.deleted- -> 1
todo-icpu5138/.deleted-allow-replay -> 1
todo-icpu5138/.deleted-attach -> 1
todo-icpu5138/.deleted-connect -> 1
todo-icpu5138/.deleted-sync -> 1
todo-icpu5139/
todo-icpu5139/.deleted- -> 1
todo-istore2b/
userspace/

sent 350 bytes  received 23434 bytes  15856.00 bytes/sec
total size is 2149311  speedup is 90.37
all 5 peer(s) seem to be alive
using existing device '/dev/vg2b/infongt-eu6'
resource 'infongt-eu6' will appear as local device '/dev/mars/infongt-eu6'
creating new replaylink '/mars/resource-infongt-eu6/replay-istore2b' -> 'log-000015327-istore2a,0,0'
creating new version symlink '/mars/resource-infongt-eu6/version-000015326-istore2b' -> '00000000000000000000000000000000,log-000015326-istore2a,0:'
WARNING: cannot read symlink '/mars/resource-infongt-eu6/version-000015325-istore2a'
cannot create new version symlink '/mars/resource-infongt-eu6/version-000015325-istore2b'
sending incremental file list

sent 60 bytes  received 12 bytes  48.00 bytes/sec
total size is 21  speedup is 0.29
successfully joined resource 'infongt-eu6'
Running hook: hook_get_vg hook_get_vg istore2a
Executing on istore2a: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on istore2a: 'lvremove -f /dev/vg2a/infongt-eu6-tmp || echo IGNORE'
IGNORE
  One or more specified logical volume(s) not found.
Executing on istore2a: 'lvremove -f /dev/vg2a/infongt-eu6-copy || echo IGNORE'
  Logical volume "infongt-eu6-copy" successfully removed
Running hook: hook_get_vg hook_get_vg icpu5138
Executing on icpu5138: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5138: 'lvremove -f /dev/vginfong/infongt-eu6-tmp || echo IGNORE'
  One or more specified logical volume(s) not found.
IGNORE
Executing on icpu5138: 'lvremove -f /dev/vginfong/infongt-eu6-copy || echo IGNORE'
  Logical volume "infongt-eu6-copy" successfully removed
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'lvremove -f /dev/vginfong/infongt-eu6-tmp || echo IGNORE'
  One or more specified logical volume(s) not found.
IGNORE
Executing on icpu5139: 'lvremove -f /dev/vginfong/infongt-eu6-copy || echo IGNORE'
  Logical volume "infongt-eu6-copy" successfully removed
Running hook: hook_get_vg hook_get_vg istore2b
Executing on istore2b: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on istore2b: 'lvremove -f /dev/vg2b/infongt-eu6-tmp || echo IGNORE'
  One or more specified logical volume(s) not found.
IGNORE
Executing on istore2b: 'lvremove -f /dev/vg2b/infongt-eu6-copy || echo IGNORE'
  Logical volume "infongt-eu6-copy" successfully removed
DONE Tue Jul 11 09:06:58 CEST 2017
