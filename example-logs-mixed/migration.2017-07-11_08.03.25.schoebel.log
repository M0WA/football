./migrate-resource.sh extend infongt-eu6 100g
operation=extend
res=infongt-eu6
target_percent=100g
Sourcing hooks in './hooks-cm3.sh'
Using clustermw username: 'tschoebeltheuer'
Determined the following CURRENT hypervisor: "icpu5139"
Determined the following CURRENT primary: "icpu5139"
PING icpu5139.schlund.de (10.46.28.76) 56(84) bytes of data.
64 bytes from icpu5139.schlund.de (10.46.28.76): icmp_seq=1 ttl=58 time=1.27 ms

--- icpu5139.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 1.275/1.275/1.275/0.000 ms
PING icpu5139.schlund.de (10.46.28.76) 56(84) bytes of data.
64 bytes from icpu5139.schlund.de (10.46.28.76): icmp_seq=1 ttl=58 time=1.35 ms

--- icpu5139.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 1.356/1.356/1.356/0.000 ms
/mars is a mountpoint
  infongt-eu6 UpToDate Replicating DCASFR Primary icpu5139 
     Hint: you are wasting 77496 MiB on disk /dev/vginfong/infongt-eu6
/vol/infongt-eu6 is a mountpoint
Determined the following secondaries: 'icpu5138'
PING icpu5138.schlund.de (10.46.12.76) 56(84) bytes of data.
64 bytes from icpu5138.schlund.de (10.46.12.76): icmp_seq=1 ttl=59 time=0.944 ms

--- icpu5138.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.944/0.944/0.944/0.000 ms
Determined the following VG name: "vginfong"
Determined the following LV path: "/dev/vginfong/infongt-eu6"
Determined USED  space: 993788
Determined TOTAL space: 19990528
Computed TARGET  space: 104857600
Computed DELTA   space: 84868096
vginfong REST space on 'icpu5139' :   7105327104
vginfong REST space on 'icpu5138' :   7105327104
[CONFIRM: Press Return to continue, ^C to abort] 
Running hook: hook_get_mountpoint hook_get_mountpoint infongt-eu6
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'lvresize -L 104857600k /dev/vginfong/infongt-eu6'
  Size of logical volume vginfong/infongt-eu6 changed from 94.75 GiB (24257 extents) to 100.00 GiB (25600 extents).
  Logical volume infongt-eu6 successfully resized
Running hook: hook_get_vg hook_get_vg icpu5138
Executing on icpu5138: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5138: 'lvresize -L 104857600k /dev/vginfong/infongt-eu6'
  Size of logical volume vginfong/infongt-eu6 changed from 94.75 GiB (24257 extents) to 100.00 GiB (25600 extents).
  Logical volume infongt-eu6 successfully resized
Executing on icpu5139: 'marsadm resize infongt-eu6'
---------------------------- check preconditions:
old_size=20480786432
possible_size=101741232128
new_size=101741232128
---------------------------- set new size:
---------------------------- wait for change:
Device size 20480786432 has not yet reached the new size 101741232128.
Device size is now 101741232128.
Executing on icpu5139: 'xfs_growfs -d /vol/infongt-eu6'
meta-data=/dev/mars/infongt-eu6  isize=256    agcount=1024, agsize=4883 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=0        finobt=0
data     =                       bsize=4096   blocks=5000192, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=0
log      =internal               bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
data blocks changed from 5000192 to 24839168
DONE Tue Jul 11 08:03:59 CEST 2017
