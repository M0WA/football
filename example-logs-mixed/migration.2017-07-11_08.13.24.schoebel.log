./migrate-resource.sh shrink infongt-eu6
operation=shrink
res=infongt-eu6
Sourcing hooks in './hooks-cm3.sh'
Using clustermw username: 'tschoebeltheuer'
Determined the following CURRENT hypervisor: "icpu5139"
Determined the following CURRENT primary: "icpu5139"
PING icpu5139.schlund.de (10.46.28.76) 56(84) bytes of data.
64 bytes from icpu5139.schlund.de (10.46.28.76): icmp_seq=1 ttl=58 time=1.31 ms

--- icpu5139.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 1.313/1.313/1.313/0.000 ms
PING icpu5139.schlund.de (10.46.28.76) 56(84) bytes of data.
64 bytes from icpu5139.schlund.de (10.46.28.76): icmp_seq=1 ttl=58 time=1.12 ms

--- icpu5139.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 1.127/1.127/1.127/0.000 ms
/mars is a mountpoint
  infongt-eu6 UpToDate Replicating DCASFR Primary icpu5139 
     Hint: you are wasting 5372 MiB on disk /dev/vginfong/infongt-eu6
/vol/infongt-eu6 is a mountpoint
Determined the following secondaries: 'icpu5138'
PING icpu5138.schlund.de (10.46.12.76) 56(84) bytes of data.
64 bytes from icpu5138.schlund.de (10.46.12.76): icmp_seq=1 ttl=59 time=0.487 ms

--- icpu5138.schlund.de ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.487/0.487/0.487/0.000 ms
Determined the following VG name: "vginfong"
Determined the following LV path: "/dev/vginfong/infongt-eu6"
Determined USED  space: 1123564
Determined TOTAL space: 99346432
Computed TARGET  space: 20000000
vginfong REST space on 'icpu5139' :   7099826176
vginfong REST space on 'icpu5138' :   7099826176
[CONFIRM: Press Return to continue, ^C to abort] 
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'if [[ -e /dev/vginfong/infongt-eu6-copy ]]; then echo "REFUSING to overwrite /dev/vginfong/infongt-eu6-copy on icpu5139 - Do this by hand"; exit -1; fi'
Executing on icpu5139: 'if [[ -e /dev/vginfong/infongt-eu6-tmp ]]; then lvremove -f /dev/vginfong/infongt-eu6-tmp; fi'
Executing on icpu5139: 'lvcreate -L 20000000k -n infongt-eu6-tmp vginfong'
  Rounding up size to full physical extent 19.07 GiB
  Logical volume "infongt-eu6-tmp" created
Executing on icpu5139: 'mkfs.xfs -dagcount=1024 /dev/vginfong/infongt-eu6-tmp'
meta-data=/dev/vginfong/infongt-eu6-tmp isize=256    agcount=1024, agsize=4883 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=0        finobt=0
data     =                       bsize=4096   blocks=5000192, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=0
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
Running hook: hook_get_vg hook_get_vg icpu5138
Executing on icpu5138: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5138: 'if [[ -e /dev/vginfong/infongt-eu6-copy ]]; then echo "REFUSING to overwrite /dev/vginfong/infongt-eu6-copy on icpu5138 - Do this by hand"; exit -1; fi'
Executing on icpu5138: 'if [[ -e /dev/vginfong/infongt-eu6-tmp ]]; then lvremove -f /dev/vginfong/infongt-eu6-tmp; fi'
Executing on icpu5138: 'lvcreate -L 20000000k -n infongt-eu6-tmp vginfong'
  Rounding up size to full physical extent 19.07 GiB
  Logical volume "infongt-eu6-tmp" created
Executing on icpu5138: 'mkfs.xfs -dagcount=1024 /dev/vginfong/infongt-eu6-tmp'
meta-data=/dev/vginfong/infongt-eu6-tmp isize=256    agcount=1024, agsize=4883 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=0        finobt=0
data     =                       bsize=4096   blocks=5000192, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=0
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
Running hook: hook_get_mountpoint hook_get_mountpoint infongt-eu6
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'mkdir -p /vol/infongt-eu6-tmp'
Executing on icpu5139: 'mount -o rw,nosuid,noatime,attr2,inode64,usrquota /dev/vginfong/infongt-eu6-tmp /vol/infongt-eu6-tmp'
Executing on icpu5139: 'for i in {1..3}; do nice -19 ionice -c3 rsync  -aSH --info=STATS  /vol/infongt-eu6/ /vol/infongt-eu6-tmp/ && exit 0; echo RESTARTING $(date); done; exit -1'

sent 1,384,954,120 bytes  received 1,136,560 bytes  19,943,750.79 bytes/sec
total size is 1,381,226,142  speedup is 1.00
Executing on icpu5139: 'mountpoint /vol/infongt-eu6 && mountpoint /vol/infongt-eu6-tmp'
/vol/infongt-eu6 is a mountpoint
/vol/infongt-eu6-tmp is a mountpoint
Executing on icpu5139: 'xfs_quota -x -c enable '
XFS_QUOTAON: File exists
XFS_QUOTAON: File exists
Executing on icpu5139: 'xfs_quota -x -c dump /vol/infongt-eu6'
Executing on icpu5139: 'xfs_quota -x -c restore /vol/infongt-eu6-tmp'
Executing on icpu5139: 'umount /vol/infongt-eu6-tmp/'
Running hook: hook_get_mountpoint hook_get_mountpoint infongt-eu6
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'if [[ -e /dev/vginfong/infongt-eu6-copy ]]; then echo "REFUSING to overwrite /dev/vginfong/infongt-eu6-copy on icpu5139 - First remove it - Do this by hand"; exit -1; fi'
Executing on icpu5139: 'if ! [[ -e /dev/vginfong/infongt-eu6-tmp ]]; then echo "Cannot start hot phase: /dev/vginfong/infongt-eu6-tmp is missing. Run 'prepare' first!"; exit -1; fi'
Running hook: hook_get_mountpoint hook_get_mountpoint infongt-eu6
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'mkdir -p /vol/infongt-eu6-tmp'
Executing on icpu5139: 'mount -o rw,nosuid,noatime,attr2,inode64,usrquota /dev/vginfong/infongt-eu6-tmp /vol/infongt-eu6-tmp'
Executing on icpu5139: 'for i in {1..3}; do time rsync  -aSH --info=STATS --delete /vol/infongt-eu6/ /vol/infongt-eu6-tmp/ && exit 0; echo RESTARTING $(date); done; exit -1'

sent 956,307 bytes  received 4,530 bytes  101,140.74 bytes/sec
total size is 1,381,226,259  speedup is 1,437.52

real	0m9.489s
user	0m0.284s
sys	0m1.480s
Executing on icpu5139: 'mountpoint /vol/infongt-eu6 && mountpoint /vol/infongt-eu6-tmp'
/vol/infongt-eu6 is a mountpoint
/vol/infongt-eu6-tmp is a mountpoint
Executing on icpu5139: 'xfs_quota -x -c enable '
XFS_QUOTAON: File exists
XFS_QUOTAON: File exists
Executing on icpu5139: 'xfs_quota -x -c dump /vol/infongt-eu6'
Executing on icpu5139: 'xfs_quota -x -c restore /vol/infongt-eu6-tmp'
Executing on icpu5139: 'umount /vol/infongt-eu6-tmp/'
Running hook: hook_resource_stop_vm hook_resource_stop_vm icpu5139 infongt-eu6
Executing on icpu5139: 'nodeagent vmstop infongt-eu6'
Set target state 'ASSEMBLED' for instance 'infongt-eu6'
Stop container 'infongt-eu6' 
Routing: currently active instances:  infongt-eu7
Routing: currently passive instances: infongt-eu6
Routing (quagga): execute scripts
 |--> /var/lib/nodeagent/instances/infongt-eu6/quagga-peers4.sh
 |--> /var/lib/nodeagent/instances/infongt-eu7/quagga-peers4.sh
 |--> /var/lib/nodeagent/instances/infongt-eu6/quagga-peers6.sh
 |--> /var/lib/nodeagent/instances/infongt-eu7/quagga-peers6.sh
Routing (bird): update bird config
 |--> /var/lib/nodeagent/network/bird-static-routes4.conf
 |--> /var/lib/nodeagent/network/bird-static-routes6.conf
 |--> /var/lib/nodeagent/network/bird-peers4.conf
 |--> /var/lib/nodeagent/network/bird-peers6.conf
Running hook: hook_get_mountpoint hook_get_mountpoint infongt-eu6
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'mkdir -p /vol/infongt-eu6-tmp'
Executing on icpu5139: 'mount -o rw,nosuid,noatime,attr2,inode64,usrquota /dev/vginfong/infongt-eu6-tmp /vol/infongt-eu6-tmp'
Executing on icpu5139: 'for i in {1..3}; do time rsync  -aSH --info=STATS --delete /vol/infongt-eu6/ /vol/infongt-eu6-tmp/ && exit 0; echo RESTARTING $(date); done; exit -1'

sent 964,956 bytes  received 4,587 bytes  277,012.29 bytes/sec
total size is 1,381,234,800  speedup is 1,424.62

real	0m3.855s
user	0m0.280s
sys	0m1.496s
Executing on icpu5139: 'mountpoint /vol/infongt-eu6 && mountpoint /vol/infongt-eu6-tmp'
/vol/infongt-eu6 is a mountpoint
/vol/infongt-eu6-tmp is a mountpoint
Executing on icpu5139: 'xfs_quota -x -c enable '
XFS_QUOTAON: File exists
XFS_QUOTAON: File exists
Executing on icpu5139: 'xfs_quota -x -c dump /vol/infongt-eu6'
Executing on icpu5139: 'xfs_quota -x -c restore /vol/infongt-eu6-tmp'
Executing on icpu5139: 'umount /vol/infongt-eu6-tmp/'
Running hook: hook_resource_stop_rest hook_resource_stop_rest icpu5139 icpu5139 infongt-eu6
Executing on icpu5139: 'nodeagent stop infongt-eu6'
Set target state 'ASSEMBLED' for instance 'infongt-eu6'
No-Op: Container 'infongt-eu6' already stopped.
Routing: currently active instances:  infongt-eu7
Routing: currently passive instances: infongt-eu6
Routing (quagga): execute scripts
 |--> /var/lib/nodeagent/instances/infongt-eu6/quagga-peers4.sh
 |--> /var/lib/nodeagent/instances/infongt-eu7/quagga-peers4.sh
 |--> /var/lib/nodeagent/instances/infongt-eu6/quagga-peers6.sh
 |--> /var/lib/nodeagent/instances/infongt-eu7/quagga-peers6.sh
Routing (bird): update bird config
 |--> /var/lib/nodeagent/network/bird-static-routes4.conf
 |--> /var/lib/nodeagent/network/bird-static-routes6.conf
 |--> /var/lib/nodeagent/network/bird-peers4.conf
 |--> /var/lib/nodeagent/network/bird-peers6.conf
Set target state 'CONFIGURED' for instance 'infongt-eu6'
No-Op: No mntpoint defined for volume tmp-chroots
Clean up volume 'tmp-chroots' from source 'filesys'
Unmount /vol/infongt-eu6
 |--> umount /vol/infongt-eu6
Clean up volume 'import' from source 'device'
 |--> UMOUNT: --
Clean up volume 'mountall' from source 'command'
 |--> CLEANUP: --
Cleanup static routes to container
 |--> Quagga6: vtysh -c "conf t" -c "no ip route 2001:8D8:5FF:5B:212:227:24:82/128 intbr0"
 |--> Bird6: 
 |--> Quagga4: vtysh -c "conf t" -c "no ip route 212.227.24.82/32 intbr0"
 |--> Bird4: 
Cleanup BGP peer configuration to container
 |--> Quagga4: vtysh -c "conf t" -c "router bgp 8560" -c "bgp router-id 0.0.0.0" -c "neighbor 169.254.254.156 peer-group PRIVATE_PEER_GROUP_V4"
 |--> Bird4: 
 |--> Quagga6: vtysh -c "conf t" -c "router bgp 8560" -c "bgp router-id 0.0.0.0" -c "neighbor fdc0:baa1:feed:ff:169:254:254:156 peer-group PRIVATE_PEER_GROUP_V6"
 |--> Bird6: 
Destroy container 'infongt-eu6'
Executing on icpu5139: 'mountpoint /vol/infongt-eu6 && { umount -f /vol/infongt-eu6 ; exit $?; } || true'
/vol/infongt-eu6 is not a mountpoint
Executing on icpu5139: 'cm3 --stop infongt-eu6 || cm3 --stop infongt-eu6 || { mountpoint /vol/infongt-eu6 && umount /vol/infongt-eu6; } || false'
Shutdown infongt-eu6.
stop: UPDATE mars_infongt-eu6  ...... OK [0s]
stop: VM::SAInfongBase: Name:	infongt-eu6
stop: VM::SAInfongBase: State:	CONFIGURED
stop: VM::SAInfongBase: Address:	169.254.254.156
stop: infongt-eu6.schlund.de is updated.
stop: Skipped 'vmhandler_stop' since vm infongt-eu6.schlund.de is already stopped
stop: VM infongt-eu6.schlund.de is stopped.
stop: Stopping storage for infongt-eu6.schlund.de
stop: DOWN mars_infongt-eu6  ...(wait-umount:20s) ... OK [0s]
stop: DOWN /dev/vginfong/infongt-eu6  ...... OK [0s]
stop: infongt-eu6.schlund.de is stopped.
stop: COMMAND FINISHED in 0 seconds
Shutdown of infongt-eu6.schlund.de finished.
Executing on icpu5139: 'rmdir /vol/infongt-eu6-tmp || echo IGNORE'
Executing on icpu5139: 'marsadm wait-umount infongt-eu6'
OK, device for resource 'infongt-eu6' is not in use.
Executing on icpu5139: 'marsadm secondary infongt-eu6'
---------------------------- check preconditions:
Current designated primary: icpu5139
all preconditions OK for resource 'infongt-eu6'
---------------------------- leave primary state:
designated primary changed from 'icpu5139' to '(none)'
---------------------------- wait for effect:
WARNING: device '/dev/mars/infongt-eu6' has not yet disappeared
device '/dev/mars/infongt-eu6' is no longer present
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'marsadm down infongt-eu6 || echo IGNORE'
---------------------------- check preconditions:
---------------------------- switch state:
successfully started pause-replay-local on resource infongt-eu6
successfully started pause-sync-local on resource infongt-eu6
successfully started pause-fetch on resource infongt-eu6
successfully started detach on resource infongt-eu6
---------------------------- wait for effect:
waiting until actual 'is-attached' == '0'...
OK, '/mars/resource-infongt-eu6/actual-icpu5139/is-attached' has acceptable value '0'
device '/dev/mars/infongt-eu6' is no longer present
OK, '/mars/resource-infongt-eu6/actual-icpu5139/is-replaying' has acceptable value '0'
OK, '/mars/resource-infongt-eu6/actual-icpu5139/is-syncing' has acceptable value '0'
Executing on icpu5139: 'marsadm leave-resource --force infongt-eu6 || echo IGNORE'
WARNING: Using FORCE option -- hopefully you know what you are doing!
---------------------------- check preconditions:
---------------------------- switch state:
---------------------------- wait for deletions:
deleted: 001595456 / 1595503
waiting for deletions to apply locally....
deleted: 001595503 / 1595503
found replay link '/mars/resource-infongt-eu6/replay-icpu5138' -> 'log-000013321-icpu5139,646080,0'
found replay link '/mars/resource-infongt-eu6/replay-icpu5138' -> 'log-000013321-icpu5139,646080,0'
checking 'version-000013320-icpu5138'
  corresponding logfile is 'log-000013320-icpu5139'
  ok 'version-000013320-icpu5138'
checking 'version-000013320-icpu5139'
  corresponding logfile is 'log-000013320-icpu5139'
  ok 'version-000013320-icpu5139'
checking 'version-000013321-icpu5138'
  corresponding logfile is 'log-000013321-icpu5139'
  ok 'version-000013321-icpu5138'
checking 'version-000013321-icpu5139'
  corresponding logfile is 'log-000013321-icpu5139'
  ok 'version-000013321-icpu5139'
checking 'log-000013321-icpu5139'
  ok 'log-000013321-icpu5139'
info: logfile 'log-000013320-icpu5139' is referenced (2), but not present.
  Unreferenced logfiles are not necessarily bad.
  They can regularly appear after 'leave-resource',
  or 'invalidate', or after emergency mode,
  or after similar operations.
deleted: 001595503 / 1595503
deleted: 001595503 / 1595503
Executing on icpu5139: 'lvrename vginfong infongt-eu6 infongt-eu6-copy'
  Renamed "infongt-eu6" to "infongt-eu6-copy" in volume group "vginfong"
Executing on icpu5139: 'lvrename vginfong infongt-eu6-tmp infongt-eu6'
  Renamed "infongt-eu6-tmp" to "infongt-eu6" in volume group "vginfong"
Running hook: hook_get_vg hook_get_vg icpu5138
Executing on icpu5138: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5138: 'marsadm down infongt-eu6 || echo IGNORE'
---------------------------- check preconditions:
---------------------------- switch state:
successfully started pause-replay-local on resource infongt-eu6
successfully started pause-sync-local on resource infongt-eu6
successfully started pause-fetch on resource infongt-eu6
successfully started detach on resource infongt-eu6
---------------------------- wait for effect:
waiting until actual 'is-attached' == '0'...
OK, '/mars/resource-infongt-eu6/actual-icpu5138/is-attached' has acceptable value '0'
device '/dev/mars/infongt-eu6' is no longer present
OK, '/mars/resource-infongt-eu6/actual-icpu5138/is-replaying' has acceptable value '0'
OK, '/mars/resource-infongt-eu6/actual-icpu5138/is-syncing' has acceptable value '0'
Executing on icpu5138: 'marsadm leave-resource --force infongt-eu6 || echo IGNORE'
WARNING: Using FORCE option -- hopefully you know what you are doing!
---------------------------- check preconditions:
---------------------------- switch state:
---------------------------- wait for deletions:
deleted: 001595503 / 1595553
waiting for deletions to apply locally....
deleted: 001595553 / 1595553
Resource contains no valid information - there is nothing to purge
deleted: 001595553 / 1595553
Executing on icpu5138: 'lvrename vginfong infongt-eu6 infongt-eu6-copy'
  Renamed "infongt-eu6" to "infongt-eu6-copy" in volume group "vginfong"
Executing on icpu5138: 'lvrename vginfong infongt-eu6-tmp infongt-eu6'
  Renamed "infongt-eu6-tmp" to "infongt-eu6" in volume group "vginfong"
Executing on icpu5139: 'marsadm delete-resource infongt-eu6 || echo IGNORE'
deleted: 001595553 / 1595621
waiting for deletions to apply locally....
deleted: 001595621 / 1595621
Executing on icpu5139: 'marsadm create-resource --force infongt-eu6 /dev/vginfong/infongt-eu6'
WARNING: Using FORCE option -- hopefully you know what you are doing!
WARNING: resource directory 'infongt-eu6' already exists
creating new resource 'infongt-eu6'
block device '/dev/vginfong/infongt-eu6': determined size = 20480786432 bytes
using existing device '/dev/vginfong/infongt-eu6'
resource 'infongt-eu6' will appear as local device '/dev/mars/infongt-eu6'
successfully created resource 'infongt-eu6'
Executing on icpu5139: 'marsadm primary infongt-eu6'
---------------------------- check preconditions:
Current designated primary: icpu5139
OK, '/mars/resource-infongt-eu6/todo-icpu5139/attach' has acceptable value '1'
OK, '/mars/resource-infongt-eu6/todo-icpu5139/connect' has acceptable value '1'
OK, '/mars/resource-infongt-eu6/todo-icpu5139/allow-replay' has acceptable value '1'
---------------------------- leave primary state:
---------------------------- wait when necessary:
---------------------------- switch to primary:
designated primary changed from 'icpu5139' to 'icpu5139'
---------------------------- wait for device:
device '/dev/mars/infongt-eu6' not yet present
device '/dev/mars/infongt-eu6' is present
Running hook: hook_resource_start hook_resource_start icpu5139 infongt-eu6
Executing on icpu5139: 'marsadm wait-cluster'
all 5 peer(s) seem to be alive
Executing on icpu5139: 'service clustermanager restart'
Executing on icpu5139: 'marsadm primary infongt-eu6'
---------------------------- check preconditions:
Current designated primary: icpu5139
OK, '/mars/resource-infongt-eu6/todo-icpu5139/attach' has acceptable value '1'
OK, '/mars/resource-infongt-eu6/todo-icpu5139/connect' has acceptable value '1'
OK, '/mars/resource-infongt-eu6/todo-icpu5139/allow-replay' has acceptable value '1'
---------------------------- leave primary state:
---------------------------- wait when necessary:
---------------------------- switch to primary:
designated primary changed from 'icpu5139' to 'icpu5139'
---------------------------- wait for device:
device '/dev/mars/infongt-eu6' is present
Executing on icpu5139: 'cm3 --stop infongt-eu6; cm3 --start infongt-eu6 || { cm3 --stop infongt-eu6; cm3 --start infongt-eu6; } || false'
Shutdown infongt-eu6.
stop: Delay of 5 seconds. Still reading initial configuration and updating status.
stop: UPDATE mars_infongt-eu6  ...... OK [1s]
stop: VM::SAInfongBase: Name:	infongt-eu6
stop: VM::SAInfongBase: State:	CONFIGURED
stop: VM::SAInfongBase: Address:	169.254.254.156
stop: infongt-eu6.schlund.de is updated.
stop: Shutdown of infongt-eu6.schlund.de skipped: already STOPPED
stop: COMMAND FINISHED in 6 seconds
Shutdown of infongt-eu6.schlund.de skipped: already STOPPED
Startup infongt-eu6.
start: UPDATE mars_infongt-eu6  ...... OK [0s]
start: VM::SAInfongBase: Name:	infongt-eu6
start: VM::SAInfongBase: State:	CONFIGURED
start: VM::SAInfongBase: Address:	169.254.254.156
start: infongt-eu6.schlund.de is updated.
start: Using VMHost 'icpu5139.schlund.de' (policy: 'free')
start: Reserving VMHost icpu5139.schlund.de
start: Starting storage for infongt-eu6.schlund.de
start: UP /dev/vginfong/infongt-eu6  ...... OK (skipped) [0s]
start: UP mars_infongt-eu6  ...(switch-primary:120s) ... OK [0s]
start: Starting VM for infongt-eu6.schlund.de via nodeagent
start: START infongt-eu6.schlund.de  ...(init) (assemble:300s) (vmstart:300s) ... OK [4s]
start: infongt-eu6.schlund.de is started.
start: COMMAND FINISHED in 4 seconds
Startup of infongt-eu6.schlund.de finished.
Running hook: hook_get_vg hook_get_vg icpu5138
Executing on icpu5138: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Running hook: hook_join_resource hook_join_resource icpu5139 icpu5138 infongt-eu6 /dev/vginfong/infongt-eu6
Executing on icpu5138: 'marsadm join-resource --ssh-port=24 infongt-eu6 /dev/vginfong/infongt-eu6'
Using SSH port '24' from command line.
joining to existing resource 'infongt-eu6'
block device '/dev/vginfong/infongt-eu6': determined size = 20480786432 bytes
PING icpu5139 (10.46.102.191) 56(84) bytes of data.
64 bytes from icpu5139 (10.46.102.191): icmp_seq=1 ttl=61 time=0.842 ms

--- icpu5139 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.842/0.842/0.842/0.000 ms
Linux icpu5139 3.14.79-grsec+ #1234 SMP Tue Jul 4 14:36:13 CEST 2017 x86_64 GNU/Linux
receiving incremental file list
.deleted-actsize-icpu5139 -> 1
.deleted-data-icpu5139 -> 1
.deleted-device-icpu5139 -> 1
.deleted-log-000013214-icpu5139 -> 1
.deleted-log-000013215-icpu5139 -> 1
.deleted-log-000013216-icpu5139 -> 1
.deleted-log-000013217-icpu5139 -> 1
.deleted-log-000013218-icpu5139 -> 1
.deleted-log-000013225-icpu5139 -> 1
.deleted-log-000013226-icpu5139 -> 1
.deleted-log-000013227-icpu5139 -> 1
.deleted-log-000013228-icpu5139 -> 1
.deleted-log-000013229-icpu5139 -> 1
.deleted-log-000013230-icpu5139 -> 1
.deleted-log-000013231-icpu5139 -> 1
.deleted-log-000013232-icpu5139 -> 1
.deleted-log-000013233-icpu5139 -> 1
.deleted-log-000013234-icpu5139 -> 1
.deleted-log-000013235-icpu5139 -> 1
.deleted-log-000013236-icpu5139 -> 1
.deleted-log-000013237-icpu5139 -> 1
.deleted-log-000013238-icpu5139 -> 1
.deleted-log-000013239-icpu5139 -> 1
.deleted-log-000013240-icpu5139 -> 1
.deleted-log-000013241-icpu5139 -> 1
.deleted-log-000013242-icpu5139 -> 1
.deleted-log-000013249-icpu5139 -> 1
.deleted-log-000013250-icpu5139 -> 1
.deleted-log-000013251-icpu5139 -> 1
.deleted-log-000013252-icpu5139 -> 1
.deleted-log-000013253-icpu5139 -> 1
.deleted-log-000013254-icpu5139 -> 1
.deleted-log-000013255-icpu5139 -> 1
.deleted-log-000013256-icpu5139 -> 1
.deleted-log-000013257-icpu5139 -> 1
.deleted-log-000013258-icpu5139 -> 1
.deleted-log-000013259-icpu5139 -> 1
.deleted-log-000013260-icpu5139 -> 1
.deleted-log-000013261-icpu5139 -> 1
.deleted-log-000013262-icpu5139 -> 1
.deleted-log-000013263-icpu5139 -> 1
.deleted-log-000013264-icpu5139 -> 1
.deleted-log-000013265-icpu5139 -> 1
.deleted-log-000013266-icpu5139 -> 1
.deleted-log-000013273-icpu5139 -> 1
.deleted-log-000013274-icpu5139 -> 1
.deleted-log-000013275-icpu5139 -> 1
.deleted-log-000013276-icpu5139 -> 1
.deleted-log-000013277-icpu5139 -> 1
.deleted-log-000013278-icpu5139 -> 1
.deleted-log-000013279-icpu5139 -> 1
.deleted-log-000013280-icpu5139 -> 1
.deleted-log-000013281-icpu5139 -> 1
.deleted-log-000013282-icpu5139 -> 1
.deleted-log-000013283-icpu5139 -> 1
.deleted-log-000013284-icpu5139 -> 1
.deleted-log-000013285-icpu5139 -> 1
.deleted-log-000013286-icpu5139 -> 1
.deleted-log-000013287-icpu5139 -> 1
.deleted-log-000013288-icpu5139 -> 1
.deleted-log-000013289-icpu5139 -> 1
.deleted-log-000013290-icpu5139 -> 1
.deleted-log-000013291-icpu5139 -> 1
.deleted-log-000013292-icpu5139 -> 1
.deleted-log-000013293-icpu5139 -> 1
.deleted-log-000013294-icpu5139 -> 1
.deleted-log-000013295-icpu5139 -> 1
.deleted-log-000013296-icpu5139 -> 1
.deleted-log-000013297-icpu5139 -> 1
.deleted-log-000013298-icpu5139 -> 1
.deleted-log-000013299-icpu5139 -> 1
.deleted-log-000013300-icpu5139 -> 1
.deleted-log-000013301-icpu5139 -> 1
.deleted-log-000013302-icpu5139 -> 1
.deleted-log-000013303-icpu5139 -> 1
.deleted-log-000013304-icpu5139 -> 1
.deleted-log-000013305-icpu5139 -> 1
.deleted-log-000013306-icpu5139 -> 1
.deleted-log-000013307-icpu5139 -> 1
.deleted-log-000013308-icpu5139 -> 1
.deleted-log-000013315-icpu5139 -> 1
.deleted-log-000013316-icpu5139 -> 1
.deleted-log-000013317-icpu5139 -> 1
.deleted-log-000013318-icpu5139 -> 1
.deleted-log-000013319-icpu5139 -> 1
.deleted-log-000013320-icpu5139 -> 1
.deleted-replay-icpu5139 -> 1
.deleted-skip-check-icpu5139 -> 1
.deleted-syncstatus-icpu5139 -> 1
.deleted-version-000013224-icpu5138 -> 1
.deleted-version-000013224-icpu5139 -> 1
.deleted-version-000013225-icpu5138 -> 1
.deleted-version-000013225-icpu5139 -> 1
.deleted-version-000013226-icpu5138 -> 1
.deleted-version-000013226-icpu5139 -> 1
.deleted-version-000013227-icpu5138 -> 1
.deleted-version-000013227-icpu5139 -> 1
.deleted-version-000013228-icpu5138 -> 1
.deleted-version-000013228-icpu5139 -> 1
.deleted-version-000013229-icpu5138 -> 1
.deleted-version-000013229-icpu5139 -> 1
.deleted-version-000013230-icpu5138 -> 1
.deleted-version-000013230-icpu5139 -> 1
.deleted-version-000013231-icpu5138 -> 1
.deleted-version-000013231-icpu5139 -> 1
.deleted-version-000013232-icpu5138 -> 1
.deleted-version-000013232-icpu5139 -> 1
.deleted-version-000013233-icpu5138 -> 1
.deleted-version-000013233-icpu5139 -> 1
.deleted-version-000013234-icpu5138 -> 1
.deleted-version-000013234-icpu5139 -> 1
.deleted-version-000013235-icpu5138 -> 1
.deleted-version-000013235-icpu5139 -> 1
.deleted-version-000013236-icpu5138 -> 1
.deleted-version-000013236-icpu5139 -> 1
.deleted-version-000013237-icpu5138 -> 1
.deleted-version-000013237-icpu5139 -> 1
.deleted-version-000013238-icpu5138 -> 1
.deleted-version-000013238-icpu5139 -> 1
.deleted-version-000013239-icpu5138 -> 1
.deleted-version-000013239-icpu5139 -> 1
.deleted-version-000013240-icpu5138 -> 1
.deleted-version-000013240-icpu5139 -> 1
.deleted-version-000013241-icpu5138 -> 1
.deleted-version-000013241-icpu5139 -> 1
.deleted-version-000013248-icpu5138 -> 1
.deleted-version-000013248-icpu5139 -> 1
.deleted-version-000013249-icpu5138 -> 1
.deleted-version-000013249-icpu5139 -> 1
.deleted-version-000013250-icpu5138 -> 1
.deleted-version-000013250-icpu5139 -> 1
.deleted-version-000013251-icpu5138 -> 1
.deleted-version-000013253-icpu5139 -> 1
.deleted-version-000013260-icpu5138 -> 1
.deleted-version-000013260-icpu5139 -> 1
.deleted-version-000013261-icpu5138 -> 1
.deleted-version-000013261-icpu5139 -> 1
.deleted-version-000013262-icpu5138 -> 1
.deleted-version-000013262-icpu5139 -> 1
.deleted-version-000013263-icpu5138 -> 1
.deleted-version-000013263-icpu5139 -> 1
.deleted-version-000013264-icpu5138 -> 1
.deleted-version-000013264-icpu5139 -> 1
.deleted-version-000013265-icpu5138 -> 1
.deleted-version-000013265-icpu5139 -> 1
.deleted-version-000013272-icpu5138 -> 1
.deleted-version-000013272-icpu5139 -> 1
.deleted-version-000013273-icpu5138 -> 1
.deleted-version-000013273-icpu5139 -> 1
.deleted-version-000013274-icpu5138 -> 1
.deleted-version-000013274-icpu5139 -> 1
.deleted-version-000013275-icpu5138 -> 1
.deleted-version-000013275-icpu5139 -> 1
.deleted-version-000013276-icpu5138 -> 1
.deleted-version-000013276-icpu5139 -> 1
.deleted-version-000013277-icpu5138 -> 1
.deleted-version-000013277-icpu5139 -> 1
.deleted-version-000013278-icpu5138 -> 1
.deleted-version-000013278-icpu5139 -> 1
.deleted-version-000013279-icpu5138 -> 1
.deleted-version-000013279-icpu5139 -> 1
.deleted-version-000013280-icpu5138 -> 1
.deleted-version-000013280-icpu5139 -> 1
.deleted-version-000013281-icpu5138 -> 1
.deleted-version-000013281-icpu5139 -> 1
.deleted-version-000013282-icpu5138 -> 1
.deleted-version-000013282-icpu5139 -> 1
.deleted-version-000013283-icpu5138 -> 1
.deleted-version-000013284-icpu5138 -> 1
.deleted-version-000013284-icpu5139 -> 1
.deleted-version-000013285-icpu5138 -> 1
.deleted-version-000013285-icpu5139 -> 1
.deleted-version-000013286-icpu5138 -> 1
.deleted-version-000013286-icpu5139 -> 1
.deleted-version-000013287-icpu5138 -> 1
.deleted-version-000013287-icpu5139 -> 1
.deleted-version-000013288-icpu5138 -> 1
.deleted-version-000013288-icpu5139 -> 1
.deleted-version-000013289-icpu5138 -> 1
.deleted-version-000013289-icpu5139 -> 1
.deleted-version-000013290-icpu5138 -> 1
.deleted-version-000013290-icpu5139 -> 1
.deleted-version-000013291-icpu5138 -> 1
.deleted-version-000013291-icpu5139 -> 1
.deleted-version-000013292-icpu5138 -> 1
.deleted-version-000013292-icpu5139 -> 1
.deleted-version-000013293-icpu5138 -> 1
.deleted-version-000013293-icpu5139 -> 1
.deleted-version-000013294-icpu5138 -> 1
.deleted-version-000013294-icpu5139 -> 1
.deleted-version-000013295-icpu5138 -> 1
.deleted-version-000013295-icpu5139 -> 1
.deleted-version-000013296-icpu5138 -> 1
.deleted-version-000013296-icpu5139 -> 1
.deleted-version-000013297-icpu5138 -> 1
.deleted-version-000013297-icpu5139 -> 1
.deleted-version-000013298-icpu5138 -> 1
.deleted-version-000013298-icpu5139 -> 1
.deleted-version-000013299-icpu5138 -> 1
.deleted-version-000013299-icpu5139 -> 1
.deleted-version-000013300-icpu5138 -> 1
.deleted-version-000013300-icpu5139 -> 1
.deleted-version-000013301-icpu5138 -> 1
.deleted-version-000013302-icpu5138 -> 1
.deleted-version-000013302-icpu5139 -> 1
.deleted-version-000013303-icpu5138 -> 1
.deleted-version-000013303-icpu5139 -> 1
.deleted-version-000013304-icpu5138 -> 1
.deleted-version-000013304-icpu5139 -> 1
.deleted-version-000013305-icpu5138 -> 1
.deleted-version-000013305-icpu5139 -> 1
.deleted-version-000013306-icpu5138 -> 1
.deleted-version-000013306-icpu5139 -> 1
.deleted-version-000013307-icpu5138 -> 1
.deleted-version-000013307-icpu5139 -> 1
.deleted-version-000013308-icpu5138 -> 1
.deleted-version-000013308-icpu5139 -> 1
.deleted-version-000013309-icpu5138 -> 1
.deleted-version-000013309-icpu5139 -> 1
.deleted-version-000013310-icpu5138 -> 1
.deleted-version-000013310-icpu5139 -> 1
.deleted-version-000013311-icpu5138 -> 1
.deleted-version-000013311-icpu5139 -> 1
.deleted-version-000013312-icpu5138 -> 1
.deleted-version-000013312-icpu5139 -> 1
.deleted-version-000013313-icpu5138 -> 1
.deleted-version-000013314-icpu5138 -> 1
.deleted-version-000013314-icpu5139 -> 1
.deleted-version-000013315-icpu5138 -> 1
.deleted-version-000013315-icpu5139 -> 1
.deleted-version-000013316-icpu5138 -> 1
.deleted-version-000013316-icpu5139 -> 1
.deleted-version-000013317-icpu5138 -> 1
.deleted-version-000013317-icpu5139 -> 1
.deleted-version-000013318-icpu5138 -> 1
.deleted-version-000013318-icpu5139 -> 1
.deleted-version-000013319-icpu5138 -> 1
.deleted-version-000013319-icpu5139 -> 1
skip-check-icpu5139 -> 14321
actual-icpu5139/.deleted- -> 1
actual-icpu5139/.deleted-device-icpu5139 -> 1
actual-icpu5139/.deleted-has-emergency -> 1
actual-icpu5139/.deleted-is-emergency -> 1
actual-icpu5139/.deleted-replay-code -> 1
defaults-icpu5139/
defaults-icpu5139/.deleted- -> 1
local-icpu5139/
local-icpu5139/.deleted- -> 1
todo-icpu5138/
todo-icpu5139/.deleted-allow-replay -> 1
todo-icpu5139/.deleted-attach -> 1
todo-icpu5139/.deleted-connect -> 1
todo-icpu5139/.deleted-sync -> 1
userspace/

sent 958 bytes  received 24,324 bytes  50,564.00 bytes/sec
total size is 2,145,057  speedup is 84.85
all 5 peer(s) seem to be alive
using existing device '/dev/vginfong/infongt-eu6'
resource 'infongt-eu6' will appear as local device '/dev/mars/infongt-eu6'
creating new replaylink '/mars/resource-infongt-eu6/replay-icpu5138' -> 'log-000014321-icpu5139,0,0'
creating new version symlink '/mars/resource-infongt-eu6/version-000014320-icpu5138' -> '00000000000000000000000000000000,log-000014320-icpu5139,0:'
WARNING: cannot read symlink '/mars/resource-infongt-eu6/version-000014319-icpu5139'
cannot create new version symlink '/mars/resource-infongt-eu6/version-000014319-icpu5138'
sending incremental file list
data-icpu5138 -> /dev/vginfong/infongt-eu6

sent 85 bytes  received 19 bytes  208.00 bytes/sec
total size is 25  speedup is 0.24
successfully joined resource 'infongt-eu6'
Running hook: hook_get_vg hook_get_vg icpu5139
Executing on icpu5139: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5139: 'lvremove -f /dev/vginfong/infongt-eu6-tmp || echo IGNORE'
  One or more specified logical volume(s) not found.
IGNORE
Executing on icpu5139: 'lvremove -f /dev/vginfong/infongt-eu6-copy || echo IGNORE'
  Logical volume "infongt-eu6-copy" successfully removed
Running hook: hook_get_vg hook_get_vg icpu5138
Executing on icpu5138: 'vgs | awk '{ print $1; }' | grep 'vginfong\|vg[0-9]\+[ab]''
Executing on icpu5138: 'lvremove -f /dev/vginfong/infongt-eu6-tmp || echo IGNORE'
  One or more specified logical volume(s) not found.
IGNORE
Executing on icpu5138: 'lvremove -f /dev/vginfong/infongt-eu6-copy || echo IGNORE'
  Logical volume "infongt-eu6-copy" successfully removed
DONE Tue Jul 11 08:16:28 CEST 2017
